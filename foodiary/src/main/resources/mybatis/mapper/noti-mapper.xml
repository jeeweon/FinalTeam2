<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="noti">
	<insert id="save" parameterType="NotiDto">
		insert into mem_noti(noti_no, caller_mem_no, receiver_mem_no, noti_content, noti_type, noti_url)
		values(mem_noti_seq.nextval, #{callerMemNo}, #{receiverMemNo}, #{noti_content}, #{notiType}, #{notiUrl})
	</insert>
	
	<!-- 최근 14일의 로그인 유저 알림 목록 조회(내 알림 목록) -->
	<select id="list" parameterType="int">
		select N.*, M.mem_nick  from  mem_noti N
		left outer join mem M on N.caller_mem_no = M.mem_no
		where N.receiver_mem_no = #{memNo}
		and N.noti_create_date >= sysdate-14
	</select>
</mapper>